nodes:
  - id: dora-mcp-host
    build: cargo build -p dora-mcp-host --release
    path: ../../target/release/dora-mcp-host
    outputs:
      - text
    inputs:
      text: dora-echo/echo
    env:
      CONFIG: mcp_host.toml

  - id: dora-echo
    build: pip install -e ../../node-hub/dora-echo
    path: dora-echo
    inputs:
      echo: dora-mcp-host/text
    outputs:
      - echo

  - id: mcp-server
    build: cargo build -p dora-mcp-server --release
    path: ../../target/release/dora-mcp-server
    outputs:
      - counter
    inputs:
      counter_reply: counter/reply
    env:
      MCP_SERVER_CONFIG: mcp_server.toml

  - id: counter
    path: nodes/counter.py
    inputs:
      text: mcp-server/counter
    outputs:
      - reply